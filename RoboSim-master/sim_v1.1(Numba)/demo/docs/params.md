# 参数格式说明

许多参数使用数组表示，需要对应的引索才能知道每位代表什么，这是此手册存在的意义

注意：`kernal`和`SimInterface`的参数命名方式不完全相同

|SimInterface|kernal|含义|
|-|-|-|
|[agents](#agents)|[cars](#agents)|车的状态|
|[detect](#detect)|[detect](#detect)|激光雷达能检测到的车|
|[vision](#vision)|[vision](#vision)|摄像头能看到的车|
|[actions](#actions)|[orders](#actions)|控制车的指令|
|[areas](#areas)|[areas](#areas)|区域信息|
|[barriers](#barriers)|[barriers](#barriers)|障碍物信息|
|[acts](#acts)|[acts](#acts)|更底层的动作|


## agents

`agents`描述机器人的状态，在`kernal`中用`cars`表述，是一个二维数组(numpy.array)，类型为`float32`，`shape`为（car_mun，11），`car_num`为机器人的数量，单个机器人的状态格式如下：

|引索|名称|类型|范围|解释|
|---|---|---|---|---|
|0|owner|int|0~1|队伍，0：红方，1：蓝方|
|1|x|float|0~800|x坐标[0]|
|2|y|float|0~500|y坐标|
|3|angle|float|-180~180|底盘绝对角度[1]|
|4|yaw|float|-90~90|云台相对底盘角度|
|5|hp|int|0~2000|血量|
|6|can_shoot|bool|0~1|决策频率高于出弹最高频率（10Hz）|
|7|bullet|int|0~|剩余子弹量|
|8|wheel_hit|int|0~|轮子撞墙的次数|
|9|armor_hit|int|0~|装甲板撞墙的次数|
|10|car_hit|int|0~|轮子或装甲板撞车的次数|

[0] 以车的起始角落为原点，并使地图的全部落在正半轴

[1] 原点与上相同，极轴落在x轴正方向，向y轴正方向旋转的方向为正

[2] 以epoch为单位计算，200epoch=1s


## detect&vision

### detect

### vision

`detect`指激光雷达能看到的车，`vision`指摄像头能看到的车，两者均用二维数组表示，`shape`为：（car_num, car_num），比如

```python
# detected 0  1  2  3  4  5  6  7  8  9    car
detect = [[0, 1, 0, 0, 0, 1, 0, 0, 0, 0], # 0
          [0, 0, 1, 1, 0, 0, 0, 1, 0, 0], # 1
          [0, 0, 0, 0, 0, 1, 0, 0, 1, 0], # 2
          [0, 0, 1, 0, 0, 0, 0, 1, 0, 0], # 3
          [0, 0, 0, 1, 0, 0, 0, 0, 0, 0], # 4
          [0, 0, 0, 0, 0, 1, 0, 0, 0, 0], # 5
          [0, 1, 0, 0, 0, 0, 0, 1, 0, 0], # 6
          [0, 0, 1, 0, 0, 1, 0, 0, 0, 0], # 7
          [0, 0, 0, 0, 0, 0, 1, 0, 1, 0], # 8
          [1, 0, 0, 0, 0, 0, 0, 0, 0, 0]] # 9
```

表示：

0号车能检测到1、5号车

1号车能检测到2、3、7号车

...

## actions

`actions`为传给机器人的指令，在`kernal`中称作`orders`，二维数组，类型为`int`，所有参数理论类型也为`int`，`shape`为（car_num，6），单个指令格式如下

|引索|名称|范围|解释|手控按键|
|-|-|-|-|-|
|0|x|-1~1|-1：后退，0：不动，1：前进[3]|s/w|
|1|y|-1~1|-1：左移，0：不动，1：右移|q/e|
|2|rotate|-1~1|底盘，-1：左转，0：不动，1：右转|a/d|
|3|yaw|-1~1|云台，-1：左转，0：不动，1：右转|b/m|
|4|shoot|0~1|是否射击，0：否，1：是|space|
|5|auto_aim|0~1|是否启用自瞄，0：否，1：是|n|

[3] 会不断加速，x最大速度3m/s，y最大速度2m/s，实际上可以把这些按键理解为油门，控制是否加速


## areas&barriers

单个区域或障碍物的格式如下

|引索|名称|范围|解释|
|---|---|---|---|
|0|border_x0|0~800|左边界|
|1|border_x1|0~800|右边界|
|2|border_y0|0~500|上边界|
|3|border_y1|0~500|下边界|

以**地图左上角为原点**

### areas

`areas`为三维数组，`shape`为（2，10，4）

|引索0|引索1|名称|类型|队伍|
|-|-|-|-|-|
|0|0|start0|起始区|红方|
|0|1|start1|起始区|红方|
|0|2|start1|起始区|红方|
|0|3|start1|起始区|红方|
|0|4|start1|起始区|红方|
|1|0|start0|起始区|蓝方|
|1|1|start1|起始区|蓝方|
|1|2|start1|起始区|蓝方|
|1|3|start1|起始区|蓝方|
|1|4|start1|起始区|蓝方|

### barriers

`barriers`为二维数组，`shape`为（12，4）

|引索0|类型|
|-|-|
|0|水平|
|1|水平|
|2|水平|
|3|水平|
|4|水平|
|5|水平|
|6|水平|
|7|水平|
|8|垂直|
|9|垂直|
|10|垂直|
|11|垂直|

## acts

这个`acts`是`kernal`里的动作，是一个较底层的action，类型`float32`，`shape`为：（car_num，6）

|引索1|名称|解释|
|-|-|-|
|0|x_speed|前进后退速度|
|1|y_speed|左右平移速度|
|2|rotate_speed|底盘旋转速度|
|3|yaw_speed|云台旋转速度|
|4|shoot|是否发射|
|5|auto_aim|是否自动瞄准|
