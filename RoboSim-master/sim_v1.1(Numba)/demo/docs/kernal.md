# kernal

## 一、基本信息

### 1、基本参数

|项目|值|说明|
|-|-|-|
|游戏运行频率|200Hz|一个周期称为一个epoch，即200epoch/s|
|决策（操作）最高频率|20Hz|即20次/s|
|尺寸比例|10mm/pixel|即8m×6m的地图对应800p×600p的游戏屏幕|
|车的尺寸|60p×45p|即600mm×450mm|
|车前进后退最大速度|1.5p/epoch|即3m/s|
|车左右平移最大速度|1p/epoch|即2m/s|
|底盘旋转最大速度|200°/s|尚未进行精确测量，有待确定|
|云台旋转最大速度|600°/s|尚未进行精确测量，有待确定|
|子弹飞行速度|12.5p/epoch|即25m/s，可设置|

### 2、须知

a. 底盘和云台的速度在按下相应的指令后会逐渐增加到最大，指令停止后速度会逐渐减小。具体控制指令请参考[params.md](./params.md)

b. 默认的队伍划分为，红方：car1-car5，蓝方：car6-car10

c. `pygame`的作用只是可视化，即逻辑运算不依靠`pygame`，训练网络时不用依靠`pygame`

d. 键盘操作时，比赛时间不以实际时间为准，以游戏时间为准

e. 键盘操作时，一次只能控制一辆车

f. 有反弹效果，但不完全符合物理定律

## 二、可改变参数

在`kernal.py`中，以下常量可以视场地等环境改变的量，如下

```python
        # 场地参数
        map_length    = 800   # 场地长度 int32
        map_width     = 600   # 场地宽度 int32
        # 比赛和环境参数
        car_num       = 10    # 车辆数量 int32
        render        = 0     # 渲染标志 int8
        # 车辆参数
        bullet_speed  = 12.5  # 子弹速度，单位为pixel float32
        motion        = 6     # 移动的惯性感大小 float32
        rotate_motion = 6     # 底盘旋转的惯性感大小 float32
        yaw_motion    = 1     # 云台旋转的惯性感大小 float32
        camera_angle  = 75 / 2   # 摄像头的视野范围 float32
        lidar_angle   = 120 / 2  # 激光雷达的视野范围 float32
        move_discount = 0.6   # 撞墙之后反弹的强度大小 float32
        # 其他参数
        theta         = np.rad2deg(np.arctan(45 / 60)) # 自瞄角度参数 float32
        # 区域参数
        areas         = np.array([[[0.0, 100.0, 0.0, 100.0],
                                [0.0, 100.0, 125.0, 225.0],
                                [0.0, 100.0, 250.0, 350.0],
                                [0.0, 100.0, 375.0, 475.0],
                                [0.0, 100.0, 500.0, 600.0]],
                                [[700.0, 800.0, 0.0, 100.0],
                                [700.0, 800.0, 125.0, 225.0],
                                [700.0, 800.0, 250.0, 350.0],
                                [700.0, 800.0, 375.0, 475.0],
                                [700.0, 800.0, 500.0, 600.0]]], 
                                dtype=np.float32) # 起始区域 float32-2x5x4
        barriers      = np.array([[350.0, 450.0, 250.0, 275.0], # O1
                                [350.0, 450.0, 275.0, 300.0], # O1
                                [350.0, 450.0, 300.0, 325.0], # O1
                                [350.0, 450.0, 325.0, 350.0], # O1
                                [200.0, 300.0,  87.0, 113.0], # O2 -
                                [200.0, 300.0, 487.0, 513.0], # O3 -
                                [500.0, 600.0,  87.0, 113.0], # O4 -
                                [500.0, 600.0, 487.0, 513.0], # O5 -
                                [187.0, 213.0, 100.0, 200.0], # O2 |
                                [187.0, 213.0, 400.0, 500.0], # O3 |
                                [587.0, 613.0, 100.0, 200.0], # O4 |
                                [587.0, 613.0, 400.0, 500.0], # O5 | 
                                ], dtype=np.float32) # 障碍物 float32-ax4
```